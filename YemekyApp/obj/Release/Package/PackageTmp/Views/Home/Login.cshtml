@{
    ViewBag.Title = "Login - ";
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
}

<div class="limiter">
    <div class="container-login100" style="background-image: url('/Content/images/bg-01.jpg');">
        <div class="wrap-login100 p-l-55 p-r-55 p-t-65 p-b-54">

            <span class="login100-form-title p-b-49">
                Kullanıcı Girişi
            </span>

            <div class="wrap-input100 validate-input m-b-23" data-validate="Gerekli Alan (*)">
                <span class="label-input100">Kullanıcı Adınız</span>
                <input class="input100" type="text" id="username" name="username" placeholder="Kullanıcı Adınız" required>
                <span class="focus-input100" data-symbol="&#xf206;"></span>
            </div>

            <div class="wrap-input100 validate-input" data-validate="Gerekli Alan (*)">
                <span class="label-input100">Şifreniz</span>
                <input class="input100" type="password" id="password" name="pass" placeholder="Şifreniz" required>
                <span class="focus-input100" data-symbol="&#xf190;"></span>
            </div>

            <div class="text-right p-t-8 p-b-31">
                @*<a href="#">
                        Şifremi Unuttum?
                    </a>*@
            </div>

            <div class="container-login100-form-btn">
                <div class="wrap-login100-form-btn">
                    <div class="login100-form-bgbtn"></div>
                    <button id="btnSubmit" class="login100-form-btn" type="submit">
                        Giriş Yap
                    </button>
                </div>
            </div>

            <!-- <div class="txt1 text-center p-t-54 p-b-20">
                <span>
                    Or Sign Up Using
                </span>
            </div>

            <div class="flex-c-m">
                <a href="#" class="login100-social-item bg1">
                    <i class="fa fa-facebook"></i>
                </a>

                <a href="#" class="login100-social-item bg2">
                    <i class="fa fa-twitter"></i>
                </a>

                <a href="#" class="login100-social-item bg3">
                    <i class="fa fa-google"></i>
                </a>
            </div> -->

            <div class="flex-col-c p-t-50">
                <!-- <span class="txt1 p-b-17">
                    Or Sign Up Using
                </span> -->

                <a href="/register" class="txt2">
                    Kayıt olmadınız mı?
                </a>
            </div>

        </div>
    </div>
</div>


<div id="dropDownSelect1"></div>

@section scripts{
    <script type="text/javascript">

        function sendLove(this1) {
            this1.disabled = true;
            this1.innerHTML = '<i class="fa fa-spinner fa-spin"> </i>  &nbsp; Lütfen bekleyiniz.';
        }

        function sendLove2(this1) {
            this1.disabled = false;
            this1.innerHTML = ' &nbsp; Giriş Yap';

        }

        var isValidate = false;

        function formKontrol() {

            if ($('#username').val().length <= 0) {
                $("#username").attr("placeholder", "Zorunlu Alan (*)").focus();
                isValidate = false;
            }else if ($('#password').val().length <= 0) {
                $("#password").attr("placeholder", "Zorunlu Alan (*)").focus();
                isValidate = false;
            } else
                isValidate = true;

        };

        $("#btnSubmit").click(function() {

            formKontrol();
            if (isValidate === true) {
                var user = new Object();
                user.Username = $('#username').val();
                user.Password = $('#password').val();
                sendLove(this);
                var btn = this;
                $.ajax({
                    type: "POST",
                    url: "@Url.Action("Login","Home")",
                    data: JSON.stringify(user),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (response) {
                        sendLove2(btn);
                        if (response === "yes") {
                            sendLove(btn);
                            iziToast.success({
                                title: 'Başarılı.',
                                message: 'Kayıt işleminiz gerçekleşmiştir.'
                            });
                            btn.innerHTML = ' <i class="fa fa-spinner fa-spin"> </i> &nbsp; Başarılı...';

                            window.setTimeout(function () { window.location.href = "/Home/Login" }, 1000);
                        } else if (response === "Şifreniz yanlıştır.") {
                            sendLove2(btn);
                            iziToast.warning({
                                title: 'Dikkat!',
                                message: 'Şifreniz yanlıştır.'
                            });
                        }
                        else if (response === "Kullanıcı adınız yanlıştır.") {
                            sendLove2(btn);
                            iziToast.warning({
                                title: 'Dikkat!',
                                message: 'Giriş bilgileriniz hatalıdır.'
                            });
                        } else {
                            alert(response);
                        }
                    },
                    failure: function(response) {
                        alert(response.responseText);
                    },
                    error: function(response) {
                        alert(response.responseText);
                    }
                });
            }
        });


    </script>
}


