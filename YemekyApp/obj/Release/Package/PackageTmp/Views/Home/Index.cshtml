@model YemekyApp.Models.RecipeModel
@{
    ViewBag.Title = "";
}

@section category{
    @Html.Partial("Partial/__Categories")
}

<!-- Recipes Items
  ================== -->
<section id="items">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2>Yeni Eklenen Tarifler</h2>
            </div>
        </div>
        <div id="tarifler">
            <div class="row">
                <!-- First recipe item -->

                @foreach (var item in Model.Recipes.OrderByDescending(x => x.ID))
                {

                    <div class="col-lg-4 col-md-6 col-sm-12 wow fadeIn">
                        <div class="recipe-item text-center">
                            <a data-theme="a" data-role="button" data-textonly="false" data-textvisible="true" data-msgtext="Yükleniyor..." data-icon="arrow-u" data-iconpos="right" href="/Home/Recipe/@item.ID">
                                <img src="~/Content/images/upload/@item.Image" alt="bbq-pork-ribs" />
                            </a>
                            <br />
                            <h4>@item.RecipeName</h4>
                        </div>
                    </div>
                }

            </div>
            
            
        </div>
        <div id="categoryGetir" class="row">
        </div>
    </div>
</section>

@section scripts{
    <script>

        $(document).ready(function() {

            $("a#categoryList").click(function(e) {
                e.preventDefault();
                var myList = '';
                var id = $(this).attr("data-id");
                $.getJSON('/recipeList/category/' + id,
                    function(data) {
                        $('#tarifler').hide();
                        if ($('#categoryGetir').css('display') !== 'none') {
                            $('#categoryGetir').empty();
                            $.each(data,
                                function(n, value) {
                                    for (var i = 0; i < value.length; i++) {

                                        myList +=
                                            '<div class="col-lg-4 col-md-6 col-sm-12 wow fadeIn">' +
                                            '<div class="recipe-item text-center">' +
                                            '<a data-theme="a" data-role="button" data-textonly="false" data-textvisible="true" data-msgtext="Yükleniyor..." data-icon="arrow-u" data-iconpos="right" href="/Home/Recipe/' +
                                            value[i].RecipeId +
                                            '">' +
                                            '<img src="/Content/images/upload/' +
                                            value[i].Image +
                                            '" alt="bbq-pork-ribs"/>' +
                                            '</a>' +
                                            '<br/>' +
                                            '<h4>' +
                                            value[i].RecipeName +
                                            '</h4>' +
                                            '</div>' +
                                            '</div>';
                                    }
                                    $('#categoryGetir').append(myList);
                                    $('html, body').animate({
                                        scrollTop: $("#categoryGetir").offset().top
                                    }, 2000);
                                });
                        }
                    });


            });


            $("a#allRecipe").click(function(e) {
                e.preventDefault();
                if ($("#tarifler").css('display') === 'none') {
                    $("#categoryGetir").empty();
                    $("#tarifler").show();
                    $('html, body').animate({
                        scrollTop: $("#tarifler").offset().top
                    }, 2000);
                }

            });
        });

    </script>
}
